(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[8067],{8067:(t,e,i)=>{"use strict";i.r(e),i.d(e,{input:()=>m});var s=i(2981),o=i(1656),a=i(2085),r=i(1960),n=i(3082),h=i(7275),l=i(6615),d=i(1577),p=i(7716),m=function(t,e,i){l.s.call(this,t,e,i)};s.x.extend(m.prototype,l.s.prototype),s.x.extend(m.prototype,d.z.prototype),s.x.extend(m.prototype,p.g.prototype),m.prototype.defaultOptions={pluginType:"uiplugin.input",pluginName:"input",serializable:!0,parseAttributes:!0,userEvents:["onfocus","onblur","onbeforeedit","oneditend","onafteredit","onchange","onviewchange","oneditkeyup","oneditenter","oneditfull","ontooltipshow","ontooltiphide"],systemEvents:["onclick","ondblclick","onkeydown","oninput","onkeyup","onkeypress","onmouseup","onmousedown","onmouseover","onmouseout","onmousemove"],useConfig:!0,valueType:"",type:"text",editType:"",dataType:"text",ioFormat:"",ioFormatter:"",displayFormat:"",displayFormatter:"",formatArray:"",applyFormat:"display",dateMask:"",timeMask:"",numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",copyOnReadOnly:"",maskFormat:"",ltrim:!1,rtrim:!1,trim:!1,mandatory:!1,maxlength:"-1",maxLength:"-1",minlength:-1,adjustMaxLength:!1,useMaxLength:!1,allowChar:"",ignoreChar:"",byteCheckIgnoreChar:"",byteCheckIgnoreCharType:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validateOnCheckMaxByteLength:!1,validateOnInput:!1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,onFocusStyle:"",onFocusClass:"w2input_focus",readOnlyClass:"w2input_readonly",readOnlyFocusEvent:!1,refSyncKeyup:!1,initValue:"",title:"",name:"",useKeyupBlur:!0,preventCopyPaste:!1,delimeter:"",decimalDelimeter:"",delimiter:"",decimalDelimiter:"",focusCalcSize:!0,enterBlur:!0,placeholder:"",autocomplete:"",useVerticalAlign:!0,escape:!0,autocorrect:"",autoCapitalize:"off",imeMode:"",autoFocus:!1,nextTabByEnter:!1,nextTabByKeyDown:!1,showPlaceHolderOnReadOnly:!1,refSync:!1,useMonthYearFormat:!1,customModelFormatter:"",customModelUnformatter:"",customPasteFormatter:"",inputMode:"",useBigDecimalFloat:!1,setValueHandler:"",getValueHandler:"",autoDecimalPoint:!1,editFormat:"",maskFormatModelExcludeChar:"",maskFormatModelExcludeCharValue:!1,exceptValidKeydown:""},m.prototype.initialize=function(t){try{this.originalStyleObj=null,this.focusStyleObj=null,this.focusedSizeFlag=!1,this.realValue="",this.supportPlaceholder=!1,this.supportAutocomplete=!1,this._focusStatus="init",this._getFocused=!1,this._changeApplyFormat=!1,this.originalHashValue={},this.options.maxlength="-1"!==this.options.maxLength?this.options.maxLength:this.options.maxlength,this.options.maxLength=this.options.maxlength,this.options.delimiter=this.options.delimiter?this.options.delimiter:this.options.delimeter,this.options.decimalDelimiter=this.options.decimalDelimiter?this.options.decimalDelimiter:this.options.decimalDelimeter,this.options.decimalDelimiter=this.options.decimalDelimiter,this.options.delimeter=this.options.delimiter,this.options.decimalDelimeter=this.options.decimalDelimiter,this.floatMaxlength="-1",this.options.parentEvent&&this.options.parentEvent.options&&"searchbox"===this.options.parentEvent.options.pluginName&&(this.scope_obj=this.options.parentEvent.scope_obj,this.scope_id=this.options.parentEvent.scope_id),"number"===this.options.dataType&&"true"===this.options.floatNumber&&(this.options.dataType="float");var e=this.options.dataType;this._getMaskFormat()||"all"!=this.options.applyFormat||""!=this.options.displayFormatter||"bigDecimal"===e||"number"===e||"float"===e||"euro"===e||"rupee"===e||"tenge"===e||(this._changeApplyFormat=!0,this.options.applyFormat="display"),this._getMaskFormat()&&(this.options.applyFormat="all","text"!=this.options.dataType||this.options.allowChar||(this.options.allowChar="0-9")),""!=this.options.displayFormat||"number"!=e&&"bigDecimal"!=e||(this.options.displayFormat=o.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/displayFormat/@defaultValue')||"",
this.options.displayFormat&&(this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter="."))),"euro"==e&&(this.options.euroMask||(this.options.euroMask=o.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/euroMask/@value')||""),this.options.customModelFormatter||(this.options.customModelFormatter=o.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/customModelFormatter/@value')||""),this.options.customModelUnformatter||(this.options.customModelUnformatter=o.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/customModelUnformatter/@value')||""));var i=this.options.onFocusStyle;if(i){var s="w2input_userfocus",r="#"+this.id+"."+s;WebSquare.cssManager.addConvertedCSS(r,i),this.options.onFocusStyle="",this.options.onFocusClass=s}if(""==this.options.displayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"float":case"bigDecimal":this.useBigDecimalFloat||(this.options.displayFormat=this.options.numberMask),this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"time":this.options.displayFormat=this.options.timeMask;break;case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter=",")}else switch(this.options.dataType){case"float":case"bigDecimal":case"number":this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter=",")}if(this.options.byteCheckIgnoreChar&&this.options.byteCheckIgnoreCharType){for(var n=this.options.byteCheckIgnoreCharType.split(","),h=!1,l=0;l<n.length;l++)n[l].wq_trim()==this.options.dataType&&(h=!0);h||(this.options.byteCheckIgnoreChar="")}"bigDecimal"===this.options.dataType&&this.options.useBigDecimalFloat&&parseFloat(this.options.maxlength)>0&&!this._getMaskFormat()&&(this.useBigDecimalFloat=!0);var p=this.options.dataType;if("bigDecimal"==p&&(p=this.useBigDecimalFloat?"float":"number"),this.formatter=WebSquare.format.createFormatter(p,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),
"default"==this._getMaskFormat()?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):(this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.formatter.setAllowChar(this.options.allowChar)):"reverse"==this._getMaskFormat()&&("number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):(this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.formatter.setAllowChar(this.options.allowChar))),this.validator=new d.s.validateInvoker(this.id,this.options),"true"!==this.options.floatNumber||"euro"!==this.options.dataType&&"rupee"!==this.options.dataType&&"tenge"!==this.options.dataType)switch(this.options.dataType){case"date":case"time":break;case"number":""==this.options.displayFormat?this.validator.addCommand(new d.s.allowCharCommand("+\\-.0-9")):this._getMaskFormat()?this.validator.addCommand(new d.s.numberMaskCommand(this.options.displayFormat,this._getMaskFormat(),this.options.applyFormat)):(this.validator.addCommand(new d.s.numberCommand),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break;case"euro":this.validator.addCommand(new d.s.euroCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"rupee":this.validator.addCommand(new d.s.rupeeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"tenge":this.validator.addCommand(new d.s.tengeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"bigDecimal":if(!this.useBigDecimalFloat){this._getMaskFormat()&&this.validator.addCommand(new d.s.numberMaskCommand(this.options.displayFormat,this._getMaskFormat(),this.options.applyFormat)),""==this.options.displayFormat?this.validator.addCommand(new d.s.allowCharCommand("+\\-.0-9")):(this.validator.addCommand(new d.s.numberCommand),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break}case"float":this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")?(this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.s.maxFloatLengthCommand(this.options.maxlength,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.s.maxLengthCommand(this.options.maxlength)),this.floatMaxlength=this.options.maxlength,this.options.maxlength="-1"):this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);break;case"text":this._getMaskFormat()&&this.validator.addCommand(new d.s.textMaskCommand(this.options.displayFormat,this._getMaskFormat(),this.options.applyFormat,this.options.allowChar))}else if(this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")){var m=this.floatMaxlength>=0?this.floatMaxlength:this.options.maxlength;this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.s.maxFloatLengthCommand(m,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.s.maxLengthCommand(m)),this.floatMaxlength=m,this.options.maxlength="-1"
}else this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);if(this.inputEvented=!1,this.options.placeholder&&WebSquare.uiplugin.input.placeholder&&(this.supportPlaceholder=!0),this.options.autocomplete&&WebSquare.uiplugin.input.autocomplete&&(this.supportAutocomplete=!0),this.beforeEditValue="",this._editTokens={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},"!":{escape:!0}},this.options.editFormat&&(this._editFormat=this.options.editFormat.split("||").sort((function(t,e){return t.replace(/[^a-z^A-Z^0-9]/g,"").length-e.replace(/[^a-z^A-Z^0-9]/g,"").length}))),this._editValue="",this._oldValue="",this.floatMaxlength>0){m=this.floatMaxlength+"";var u=this.options.decimalDelimiter||".",c=m.split(u);this._integerMaxLength=parseInt(c[0]),this._fractionMaxLength=c[1]?parseInt(c[1]):0}}catch(t){a.w.printStackTrace(t,null,this)}},m.htmlStr=["<input id='",,"'",," class='w2input ",,"'",,"",," />"],m.placeholder="string"==typeof document.createElement("input").placeholder,m.autocomplete="string"==typeof document.createElement("input").autocomplete,m.prototype.toHTML=function(){try{var t=WebSquare.uiplugin.input.htmlStr,e="";"auto"==this.options.imeMode?e="ime-mode:auto;":"inactive"==this.options.imeMode?e="ime-mode:inactive;":"active"==this.options.imeMode?e="ime-mode:active;":"disabled"==this.options.imeMode&&(e="ime-mode:disabled;"),this.options.style&&";"!==this.options.style.slice(-1)&&(this.options.style+=";");var i=this.options.escape?WebSquare.xml._encode(this.options.placeholder):this.options.placeholder,s=this.options.escape?WebSquare.xml._encode(this.options.title):this.options.title;return t[1]=this.id,t[3]=""==this.options.style&&""==this.options.imeMode?"":" style='"+this.options.style+e+"'",t[5]=this.options.className+(this.options.readOnly?" "+this.options.readOnlyClass:""),t[7]=this.options.type?" type='"+this.options.type+"'":"",t[9]=this.options.title?" title='"+s+"'":"",t[9]+=this.options.name?" name='"+this.options.name+"'":"",t[9]+=this.options.maxlength>=0&&!this.options.useMaxLength?" maxLength='"+this.options.maxlength+"'":"",t[9]+=this.supportPlaceholder?" placeholder='"+i+"'":"",t[9]+=this.supportAutocomplete&&this.options.autocomplete?" autocomplete='"+this.options.autocomplete+"'":"",t[9]+=0!=WebSquare.hybridApp&&this.options.autocorrect?" autocorrect='"+this.options.autocorrect+"'":"",t[9]+=0==WebSquare.hybridApp?"":" autoCapitalize='"+this.options.autoCapitalize+"'",t[9]+=this.getAttributesString(),t[9]+=this.options.imeMode?" imeMode='"+this.options.imeMode+"'":"",t[9]+=this.options.tabIndex?" tabIndex='"+this.options.tabIndex+"'":"",n.D.isMobile()&&(t[9]+=this.options.inputMode?" inputMode='"+this.options.inputMode+"'":""),t.join("")}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if(this.options.useVerticalAlign&&this.setVerticalAlign(),this.options.initValue&&this._setValue(this.options.initValue),this.modelControl.isBinded()){var i=this.modelControl.getData();this.options.useMonthYearFormat&&"date"===this.options.dataType&&(i=WebSquare.date.getIOFormatDate(i,this.options.ioFormat)),this.setValueNM(i)}if(this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")),this._editFormat)return void this.setActionEditFormat();var s=this;this.addEvent("oneditend",(function(){var t="",e=s.render.value.wq_trim()
;("number"==s.options.dataType||"float"==s.options.dataType||s.useBigDecimalFloat||"euro"==s.options.dataType||"rupee"==s.options.dataType||"tenge"==s.options.dataType)&&("."!==e&&"-"!==e&&"+"!==e&&","!==e&&e!=="+"+this.options.decimalDelimiter&&e!=="-"+this.options.decimalDelimiter||(s.render.value="")),t="all"==s.options.applyFormat?s._getMaskFormat()?s.render.value:s._getValue():s.render.value,t=s.validator.validateString(t),s.options.placeholder&&!this.supportPlaceholder&&0==s.realValue.length&&this.render.className.match("w2input_placeholder")||s.setValueNM(t,!0)})),(n.D.isIEAllVersion()||n.D.isSpartan())&&(this.event.addListener(this.render,"onfocusin",this.event.bindAsEventListener(this,this.handleFocusinEvent)),this.event.addListener(this.render,"onbeforeeditfocus",this.event.bindAsEventListener(this,this.handleBeforeFocusEvent))),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusValueEventAdv,{eventonreadonly:!0})),1==this.getReadOnly()&&(this.inputEvented=!0,this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEventBasic,{eventonreadonly:!0})),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.options.validateOnInput&&(this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator)),this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteValidator))),o.v.browserCheck.android&&o.v.browserVersion()>=5&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputEvent)),this._getMaskFormat()&&!this.useBigDecimalFloat&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputMask)),n.D.isFF()&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.checkMaxByteLength)),"number"==this.options.dataType&&this.setStyle("imeMode","disabled")),n.D.isIEAllVersion()?this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){document.activeElement!=this.render&&this.focus()}))):n.D.isOpera()&&this.options.preventCopyPaste&&this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){r.B.stopEvent(t),this.focus()}))),"noFormat"==this.options.copyOnReadOnly&&(n.D.isIEAllVersion()?(this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){this.options.readOnly&&"noFormat"==this.options.copyOnReadOnly&&r.B.preventDefault(t)}))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,(function(t){67==t.keyCode&&(t.ctrlKey||t.metaKey)&&this.handleCopyEvent({})})))):this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,this.handleCopyEvent))),"color"!=this.options.type||n.D.isIEAllVersion()||n.D.isSpartan()||this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleColorChangeEvent)),this.options.maxlength>=0&&!this.options.useMaxLength&&(this.render.maxLength=this.options.maxlength,this.originalMaxLength=this.options.maxlength),this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory))}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.setActionEditFormat=function(){try{this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyDownDynamicMask)),this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleDynamicMask)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyUpDynamicMask)),
this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurDynamicMask)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusValueEventAdvMask)),this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory))}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.refresh=function(){try{if(this.modelControl.isBinded()&&!this.noRefresh){var t=this._getValue(),e=this.modelControl.getData(),i=n.D.getGlobalFunction(this.options.customModelUnformatter,this.scope_id);"function"==typeof i&&(e=i.call(this,e,this.getDisplayValue())),this.options.useMonthYearFormat&&"date"===this.options.dataType&&(e=WebSquare.date.getIOFormatDate(e,this.options.ioFormat)),this._getMaskFormat()&&(e=this.maskFormatModelUnFormat(e)),this._editFormat&&(this._editValue=e),this.setValueNM(e),t!=this._getValue()&&r.B.fireEvent(this,"onchange",{oldValue:t,newValue:this._getValue()})}this.broadcast({linkedDataList:["refresh"]})}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.commit=function(){try{var t=this._getValue();if(("bigDecimal"===this.options.dataType||"float"===this.options.dataType)&&t[t.length-1]===this.options.decimalDelimiter)return;this._setValue(t)}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.setValue=function(t){try{var e,i=this.options.setValueHandler;if(i){var s=n.D.getGlobalFunction(i,this.scope_id);"function"==typeof s&&(e=s.call(this,t))}else e=this._setValue(t);return this._oldValue=this._getValue(),e}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype._setValue=function(t,e){try{if(n.D.isNull(t))return;t=this._trim(t),this.options.adjustMaxLength&&"number"==this.options.dataType&&!this.options.useMaxLength&&(t=this.adjustMaxLength(t));var i=this._getValue(),s=n.D.getGlobalFunction(this.options.customModelUnformatter,this.scope_id);"function"==typeof s&&(t=s.call(this,t,this.getDisplayValue())),this._getMaskFormat()&&(t=this.maskFormatModelUnFormat(t)),e&&!0===e.skipNM||this.setValueNM(t,!1,e),this.options.useMonthYearFormat&&"date"===this.options.dataType&&(t=WebSquare.date.getIOUnFormatDate(t,this.options.ioFormat));var o=n.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id),h=t;"function"==typeof o&&(t=o.call(this,t,this.getDisplayValue())),this._getMaskFormat()?this.modelControl.setData(this.maskFormatModelFormat(t)):h!==t?this.modelControl.setData(t,null,{orgValue:h}):this.modelControl.setData(t),this._editFormat&&(this._editValue=t),i!=this._getValue()&&r.B.fireEvent(this,"onchange",{oldValue:i,newValue:this._getValue()}),this.broadcast({linkedDataList:["refresh"]})}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.setValueNM=function(t,e){try{if(n.D.isNull(t))return;if(t=this._trim(t),"bigDecimal"==this.getDataType()){var i=this.options.decimalDelimiter||".";if("number"==typeof t)if(h.k.printLog("Warning : BigDecimal Datatype, then you must enter a string instead of a number to get the exact data.["+this.id+"]"),this.useBigDecimalFloat){var s=(o=(t=t.toString()).split(i))[1]?o[1].length:0;t=Big(t.toString()).toFixed(s)}else t=Big(t.toString()).toFixed();else if(t.constructor==Big)t=t.toFixed();else if("string"==typeof t)try{if(""===t)t="";else if(!this._getMaskFormat())if(this.useBigDecimalFloat){var o;s=(o=t.split(i))[1]?o[1].length:0;t=Big(t).toFixed(s)}else t=Big(t).toFixed()}catch(t){h.k.printLog("Warning : You must enter the exact number of data.["+this.id+"]")}}else t=t.toString();if(t=document.activeElement==this.render||this._editFormat?t:this.formatter.format(t),this._editFormat){var r=!1;if(this.options.displayFormatter){var l=n.D.getGlobalFunction(this.options.displayFormatter,this.scope_id);"function"==typeof l&&(t=l(t),r=!0)}if(!0!==r)t=WebSquare.text.dynamicMask(t,this._editFormat,this._editTokens).value}else e&&"all"==this.options.applyFormat?(t=this.validator.validateString(t),
t=this.formatter.format(t)):this._getMaskFormat()&&"all"==this.options.applyFormat&&(t=this.formatter.format(t));this.options.placeholder&&!this.supportPlaceholder?0==t.length?(this.hasClass("w2input_placeholder")||this.addClass("w2input_placeholder"),this.render.value=this.options.placeholder):(this.removeClass("w2input_placeholder"),this.render.value!==t&&(this.render.value=t)):this.render.value!==t&&(this.render.value=t),this.realValue=t}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.getValue=function(){try{var t,e=this.options.getValueHandler;if(!e){if(t=this._getValue(),!0===this.options.maskFormatModelExcludeCharValue&&(t=this.maskFormatModelFormat(t)),("euro"===this.options.dataType||"tenge"===this.options.dataType||"rupee"===this.options.dataType)&&this.parentControl&&this.parentControl.options&&"gridView"!=this.parentControl.options.pluginName){var i=n.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id);"function"==typeof i&&(t=i.call(this,t))}return t}var s=n.D.getGlobalFunction(e,this.scope_id);if("function"==typeof s)return s.call(this)}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype._getValue=function(){try{var t;return t=this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass("w2input_placeholder")?"":this.render.value,this._getMaskFormat()&&"all"==this.options.applyFormat?t:this._editFormat?this._editValue:this.formatter.unformat(t)}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.setFocusSize=function(t){try{if(1==this.options.focusCalcSize&&-1==this.getStyle("height").indexOf("%")&&-1==this.getStyle("width").indexOf("%")){var e=parseInt(this.getStyle("height")),i=parseInt(this.getStyle("width")),s=this.focusStyleObj.paddingLeft+this.focusStyleObj.paddingRight+this.focusStyleObj.borderLeftWidth+this.focusStyleObj.borderRightWidth-(this.originalStyleObj.paddingLeft+this.originalStyleObj.paddingRight+this.originalStyleObj.borderLeftWidth+this.originalStyleObj.borderRightWidth),o=this.focusStyleObj.paddingTop+this.focusStyleObj.paddingBottom+this.focusStyleObj.borderTopWidth+this.focusStyleObj.borderBottomWidth-(this.originalStyleObj.paddingTop+this.originalStyleObj.paddingBottom+this.originalStyleObj.borderTopWidth+this.originalStyleObj.borderBottomWidth);1==t&&0==this.focusedSizeFlag?(this.setStyle("height",e-o+"px"),this.setStyle("width",i-s+"px"),this.focusedSizeFlag=!0):0==t&&1==this.focusedSizeFlag&&(this.setStyle("height",e+o+"px"),this.setStyle("width",i+s+"px"),this.focusedSizeFlag=!1)}}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.setVerticalAlign=function(){try{if(n.D.isIE()){var t=this.getSize("height")||parseInt(this.getStyle("height"));isNaN(t)||this.setStyle("lineHeight",t+"px")}}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":1==e?this.addClass(this.render,"w2input_disabled"):this.removeClass(this.render,"w2input_disabled");break;case"readOnly":1==e?this.addClass(this.render,this.options.readOnlyClass):this.removeClass(this.render,this.options.readOnlyClass);break;case"mandatory":1==e?this.addClass(this.render,"w2input_mandatory"):this.removeClass(this.render,"w2input_mandatory")}}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.getFormattedValue=function(){try{return this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass("w2input_placeholder")?"":this.render.value}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.validate=function(){try{var t=this.validator.validate(this._getValue());return t||this.focus(),t}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.validateObject=function(){try{var t=this.validator.validate(this._getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),
e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.adjustMaxLength=function(t){try{if(this.options.useMaxLength)return t;if(this.options.maxlength>0){var e=(t+="").substr(0,1),i=parseInt(this.originalMaxLength,10);"-"!=e&&"+"!=e||(i+=1),this.setMaxLength(i),this.render.maxLength=i}return t}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.getDataType=function(){try{return this.options.dataType}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.setDataType=function(t){try{if(!t||"euro"==t||"rupee"==t||"tenge"==t)return;this.options.dataType=t,this._refreshOption()}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype._refreshOption=function(t){try{void 0!==t&&null!=t||(t={});var e=this.options.dataType;if("all"==this.options.applyFormat&&""==this.options.displayFormatter&&"bigDecimal"!==e&&"number"!==e&&"euro"!==e&&"rupee"!==e&&"tenge"!==e&&(this._changeApplyFormat=!0,this.options.applyFormat="display"),""==this.options.displayFormat||!0===t.refreshDisplayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"time":this.options.displayFormat=this.options.timeMask;break;case"float":this.options.delimiter||this.options.delimeter||(this.options.delimiter=","),this.options.decimalDelimiter||this.options.decimalDelimeter||(this.options.decimalDelimiter=".");break;case"bigDecimal":case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||this.options.delimeter||(this.options.delimiter=","),this.options.decimalDelimiter||this.options.decimalDelimeter||(this.options.decimalDelimiter=".")}"bigDecimal"===this.options.dataType&&this.options.useBigDecimalFloat&&parseFloat(this.options.maxlength)>0&&!this._getMaskFormat()&&(this.useBigDecimalFloat=!0);var i=this.options.dataType;"bigDecimal"==i&&(i=!0===this.useBigDecimalFloat?"float":"number");var s=this._getValue();switch(this.formatter=WebSquare.format.createFormatter(i,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),"default"==this._getMaskFormat()?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):"reverse"==this._getMaskFormat()&&("number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id)),this.validator.clearCommand(),this.validator=new d.s.validateInvoker(this.id,this.options),this.options.dataType){case"date":case"time":break;case"bigDecimal":case"number":""==this.options.displayFormat?this.validator.addCommand(new d.s.allowCharCommand("+\\-.0-9")):(this.validator.addCommand(new d.s.numberCommand),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break;case"float":this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat));break;case"euro":this.validator.addCommand(new d.s.euroCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"rupee":
this.validator.addCommand(new d.s.rupeeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"tenge":this.validator.addCommand(new d.s.tengeCommand(this.options.delimiter,this.options.decimalDelimiter))}"string"==typeof t.refreshValue?this._setValue(t.refreshValue):this.setValueNM(s)}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype._setFormat=function(t,e){try{for(var i in t)i in this.options&&"string"==typeof t[i]&&(this.options[i]=t[i]);this._refreshOption(e)}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.setDisplayFormat=function(t){try{this.options.displayFormat=t;var e=this._getValue();"number"===this.options.dataType&&("default"==this._getMaskFormat()?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):"reverse"==this._getMaskFormat()?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),""==this.options.displayFormat?(this.validator.removeCommand(new d.s.numberCommand(this.options.delimiter,this.options.decimalDelimiter)),this.validator.addCommand(new d.s.allowCharCommand("+\\-.0-9"))):(this.validator.removeCommand(new d.s.allowCharCommand("+\\-.0-9")),this.validator.addCommand(new d.s.numberCommand(this.options.delimiter,this.options.decimalDelimiter)),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0))),this.formatter.setMasking(t),this.setValueNM(e)}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.setIoFormat=function(t,e){try{if("date"!==this.options.dataType)return;var i={};if("string"==typeof e&&e!==this.options.dateMask&&(i.refreshDisplayFormat=!0),"string"==typeof t&&t!==this.options.ioFormat){var s=WebSquare.format.createFormatter(this.options.dataType,t,"",this.options.ioFormat,null,null,this.scope_id,this.id);i.refreshValue=s.format(this._getValue())}this._setFormat({ioFormat:t,dateMask:e},i)}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.setEditFormat=function(t){try{if(this._editFormat||this.setActionEditFormat(),void 0!==t&&t.length>0){var e=this.getValue();this._editFormat=t.split("||").sort((function(t,e){return t.replace(/[^a-z^A-Z^0-9]/g,"").length-e.replace(/[^a-z^A-Z^0-9]/g,"").length}));for(var i=this._editFormat.length-1;i>=0;i--){var s=this._editFormat[i].replace(/[^#^S^X]/g,"").length,o=this._editFormat[i-1];if(o?o.replace(/[^#^S^X]/g,"").length:s,e.length>s){e=e.substring(0,s);break}}var r=WebSquare.text.dynamicMask(e,this._editFormat,this._editTokens);this.render.value=r.value,this._editValue=r.orgValue}}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.changeCurrency=function(t,e,i,s,o,r){try{return 1===arguments.length&&"object"==typeof arguments[0]?this._changeCurrency(arguments[0]):this._changeCurrency({type:t,format:e,delimiter:i,decimalDelimiter:s,customModelFormatter:o,customModelUnformatter:r})}catch(t){a.w.printStackTrace(t,null,this)}},
m.prototype._changeCurrency=function(t){try{var e=t.type||"",i=t.format,s=t.delimiter||"",r=t.decimalDelimiter||"",h=t.customModelFormatter,l=t.customModelUnformatter;if(!e||"float"!==e&&"number"!==e&&"euro"!==e&&"rupee"!==e&&"tenge"!==e)return;this.options.decimalDelimiter;"number"===e&&"true"===this.options.floatNumber&&(e="float");var p=this.getValue(),m=e;switch(e){case"number":case"float":case"bigDecimal":m="number",i||(this.options.numberMask||(this.options.numberMask=o.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/numberMask/@value')||""),i=this.options.numberMask),this.options.delimiter=s||",",this.options.decimalDelimiter=r||".";break;case"euro":i||(this.options.euroMask||(this.options.euroMask=o.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/euroMask/@value')||""),i=this.options.euroMask),this.options.delimiter=s||".",this.options.decimalDelimiter=r||",";break;case"rupee":i||(this.options.rupeeMask||(this.options.rupeeMask=o.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/rupeeMask/@value')||""),i=this.options.rupeeMask),this.options.delimiter=s||",",this.options.decimalDelimiter=r||".";break;case"tenge":i||(this.options.tengeMask||(this.options.tengeMask=o.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/tengeMask/@value')||""),i=this.options.tengeMask),this.options.delimiter=s||" ",this.options.decimalDelimiter=r||","}if(!i)return;if(this.options.dataType=e,this.options.displayFormat=i,void 0!==h?this.options.customModelFormatter=h:this.options.customModelFormatter||(this.options.customModelFormatter=o.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+m+'"]/customModelFormatter/@value')||""),void 0!==l?this.options.customModelUnformatter=l:this.options.customModelUnformatter||(this.options.customModelUnformatter=o.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+m+'"]/customModelUnformatter/@value')||""),this._changeApplyFormat&&(this.options.applyFormat="all"),this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.validator.clearCommand(),this.validator=new d.s.validateInvoker(this.id,this.options),"float"===this.options.dataType||this.useBigDecimalFloat)if(this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")||this.floatMaxlength>=0){var u=this.floatMaxlength>=0?this.floatMaxlength:this.options.maxlength;this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.s.maxFloatLengthCommand(u,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.s.maxLengthCommand(u)),this.floatMaxlength=u,this.options.maxlength="-1"}else this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);if("number"===this.options.dataType)this.validator.addCommand(new d.s.numberCommand(this.options.delimiter,this.options.decimalDelimiter)),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0);else if("euro"===this.options.dataType||"rupee"===this.options.dataType||"tenge"===this.options.dataType)if(this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")||this.floatMaxlength>=0){u=this.floatMaxlength>=0?this.floatMaxlength:this.options.maxlength;this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.s.maxFloatLengthCommand(u,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.s.maxLengthCommand(u)),this.floatMaxlength=u,this.options.maxlength="-1"
}else this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);this.formatter.setMasking(i),"function"==typeof(l=n.D.getGlobalFunction(this.options.customModelUnformatter,this.scope_id))&&(p=l.call(this,p)),this.setValueNM(p)}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.getDisplayFormat=function(){try{return this.options.displayFormat}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.setDisplayFormatter=function(t){try{var e=this._getValue();if(this.options.displayFormatter=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.options.displayFormat){var i;this.displayFormatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,"",this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),e=this.originalHashValue[e]||e,e=this.displayFormatter.format(e),i=this.displayFormatter.hash_format_to_original,this.originalHashValue=i}this.setValueNM(e)}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.getDisplayFormatter=function(){try{return this.options.displayFormatter}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.getDisplayValue=function(){try{return this.formatter.format(this._getValue())}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.getIOValue=function(){try{return this._getValue()}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.getIOFormat=function(){try{return this.options.ioFormat}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.getIOFormatter=function(){try{return this.options.ioFormatter}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.setInitValue=function(t){try{var e=this._getValue();this.setValueNM(this.options.initValue),this._getMaskFormat()?this.modelControl.setData(this.maskFormatModelFormat(this.options.initValue)):this.modelControl.setData(this.options.initValue),t&&t.fireEvent&&e!=this._getValue()&&r.B.fireEvent(this,"onchange",{oldValue:e,newValue:this._getValue()}),this.broadcast({linkedDataList:["refresh"]})}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.setDefaultValue=function(t){try{"string"==typeof t&&(this.options.initValue=t)}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.checkMaxByteLength=function(t){if(-1!=this.options.maxByteLength||this._isNumberType()&&this.options.maxLength>0){if(this.options.validateOnCheckMaxByteLength){var e=this.render.value;e=this.validator.validateString(e),this.render.value=e,this.realValue=e}e=this.render.value;"all"==this.options.applyFormat&&(e=this.validator.validateString(e));var i=e;-1!=this.options.maxByteLength&&e!=(i=n.D.getStringByByteSize(e,this.options.maxByteLength,this.options.byteCheckIgnoreChar))&&(this.reFocus=!0,this._focusStatus="cancel",this.setValueNM(""),this.blur(),this.render.focus(),"all"==this.options.applyFormat?this.setValueNM(i):(this.render.value=i,this.realValue=i));var s=i.charAt(i.length-1),a=!1;if(this.options.autoFocus&&!0!==n.D.isKorean(s))if(n.D.getByteLength(i)==this.options.maxByteLength)a=!0;else if(this._isNumberType()&&this.options.maxLength>0){var h=this.options.decimalDelimiter||".",l=(e=e.toString()).split(h),d=l[0],p=l[1],m=this.options.maxLength.toString().split(h),u=m[1]?parseInt(m[1]):0,c=m[0]?parseInt(m[0]):0;p&&p.length>0?u>0&&p.length>=u&&(a=!0):d.length>0&&!u&&c>0&&d.length>=c&&(a=!0)}if(a){if("spinner"===this.options.pluginName&&this.parentControl)return void((y=n.D.getNextTabbableComp(this.parentControl.id))&&y.focus());if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var y;(y=n.D.getNextTabbableComp(this.id))&&this._keyDownStart&&y.focus()}else{var g=n.D.getGlobalFunction(o.v.getConfiguration("/WebSquare/nextTabFunction/@value"));"function"==typeof g&&g.call(this,this.id)}}
this.options.validateOnInput||!1===t||!0===n.D.isKorean(s)||n.D.getByteLength(i)!=this.options.maxByteLength||r.B.fireEvent(this,"oneditfull")}},m.prototype.handlePasteEvent=function(t){var e,i;if("paste"==t.type){var s;if(t.clipboardData)s=t.clipboardData;else{if(!window.clipboardData)return;s=window.clipboardData}if(""!=(e=s.getData("Text"))){var o=this.formatter.masking,a=this.valueType;i=void 0!==a&&null!=a&&"number"==a?WebSquare.text.unformatCurrency(o,e):void 0!==a&&null!=a&&"date"==a?WebSquare.text.unformatDate(o,e):void 0!==a&&null!=a&&"time"==a?WebSquare.text.unformatTime(o,e):WebSquare.text.unformatText(o,e),s.setData("Text",i),r.B.stopPropagation(t)}}},m.prototype.handlePasteValidator=function(t){var e="";if("paste"==t.type){var i,s;if(t.clipboardData)i=t.clipboardData;else{if(!window.clipboardData)return;i=window.clipboardData}if(e=i.getData("Text"),"function"==typeof this._customPasteFormatter){var o=this._customPasteFormatter.call(this,e);e=o||e}if("number"==this.options.dataType){var a=this.render.value.wq_trim();"."!==a&&"-"!==a&&"+"!==a||(this.render.value="")}var n=WebSquare.text.getSelection(this.render);s="all"==this.options.applyFormat?this._getValue():this.render.value;var h=WebSquare.text.getCaretPos(this.render),l=e.length;e=s.substring(0,n.start)+e+s.substring(n.end),e=this.validator.validateString(e),this.setValueNM(e,!1),WebSquare.text.setCaretPos(this.render,h+l),r.B.preventDefault(t)}},m.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){a.w.printStackTrace(t)}},m.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.modelControl.unbindRef(),this.options.ref="",this.refresh())}catch(t){a.w.printStackTrace(t)}},m.prototype.setPlaceholder=function(t){try{if(n.D.isNull(t))return;if(WebSquare.uiplugin.input.placeholder&&(this.supportPlaceholder=!0),this.options.placeholder!=t)if(this.options.placeholder=t,this.options.original_placeholder=t,this.supportPlaceholder){var e=document.getElementById(this.id);this.options.showPlaceHolderOnReadOnly||!e.disabled&&!e.readOnly?e.placeholder=this.options.placeholder:this.options.placeholder=""}else 0==this.realValue.length&&(this.options.showPlaceHolderOnReadOnly||!this.render.disabled&&!this.render.readOnly?this.hasClass("w2input_placeholder")?this.render.value=this.options.placeholder:(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")):this.options.placeholder="")}catch(t){a.w.printStackTrace(t)}},m.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.setAllowChar=function(t){try{if(n.D.isNull(t))return!1;if(this.options.allowChar!=t){var e=this._getValue();this.options.allowChar=t.wq_trim();var i=this.options.dataType;switch("bigDecimal"==i&&(i=!0===this.useBigDecimalFloat?"float":"number"),"default"==this._getMaskFormat()?i="number"==this.options.dataType||"bigDecimal"==this.options.dataType?"numberMask":"textMask":"reverse"==this._getMaskFormat()&&(i="number"==this.options.dataType||"bigDecimal"==this.options.dataType?"reverseNumberMask":"reverseTextMask"),this.formatter=WebSquare.format.createFormatter(i,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this._getMaskFormat()&&this.formatter.setAllowChar(this.options.allowChar),this.validator=new d.s.validateInvoker(this.id,this.options),this.options.dataType){case"date":case"time":break;case"euro":this.validator.addCommand(new d.s.euroCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"rupee":this.validator.addCommand(new d.s.rupeeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"tenge":
this.validator.addCommand(new d.s.tengeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"number":case"bigDecimal":if("number"===this.options.dataType||!this.useBigDecimalFloat){""==this.options.displayFormat?this.validator.addCommand(new d.s.allowCharCommand("+\\-.0-9")):(this.validator.addCommand(new d.s.numberCommand),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break}case"float":this.floatMaxlength>=0?(this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.s.maxFloatLengthCommand(this.floatMaxlength,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.s.maxLengthCommand(this.floatMaxlength)),this.options.maxlength="-1"):this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat))}var s=this.formatter.unformat(e),o=this.validator.validateString(s);this.setValueNM(o),this.noRefresh=!0,this.options.useMonthYearFormat&&"date"===this.options.dataType&&(o=WebSquare.date.getIOUnFormatDate(o,this.options.ioFormat));var r=n.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id);return"function"==typeof r&&(o=r.call(this,o,this.getDisplayValue())),this._getMaskFormat()?this.modelControl.setData(this.maskFormatModelFormat(o)):this.modelControl.setData(o),this.noRefresh=!1,!0}}catch(t){a.w.printStackTrace(t)}return!1},m.prototype.maskFormatModelFormat=function(t){try{if(!t)return t;var e="";if(this._getMaskFormat())if(this.options.maskFormatModelExcludeChar)for(var i=this.options.maskFormatModelExcludeChar.split(""),s=0;s<t.length;s++){for(var o=!1,r=0;r<i.length;r++)if(t[s]==i[r]){o=!0;break}o||(e+=t[s])}else e=t;else e=t;return e}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.maskFormatModelUnFormat=function(t){try{if(!t)return t;var e=t;if(this._getMaskFormat()&&this.options.maskFormatModelNumber&&("number"==this.options.dataType||"bigDecimal"==this.options.dataType)&&(e=t.toString(),this.options.displayFormat&&this.options.displayFormat.indexOf(".")>0))for(var i=e.indexOf(".")<0?0:e.length-e.indexOf(".")-1,s=0;s<this.options.displayFormat.length-this.options.displayFormat.indexOf(".")-i-1;s++)0==s&&e.indexOf(".")<0&&(e=t+"."),e+="0";return e}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.handleBlurEventBasic=function(t,e){try{e=e||{};if(this.getReadOnly()&&!this.options.readOnlyFocusEvent)return;!0!==e.skipEditEnd&&r.B.fireEvent(this,"oneditend"),this.setFocusSize(!1),this.removeClass(this.render,this.options.onFocusClass);var i=this._getValue(),s=!0;"all"===this.options.applyFormat&&0===Math.abs(i)&&"-"===i.charAt(0)&&(i=i.slice(1),s=!1),this._editFormat&&(s=!1),this._setValue(i,{skipNM:s});var o={value:this._oldValue};void 0===o.value&&(o.value=this.originalValue),o.value!=this._getValue()&&(r.B.fireEvent(this,"onchange",{oldValue:o.value,newValue:this._getValue()}),r.B.fireEvent(this,"onviewchange",{oldValue:o.value,newValue:this._getValue()})),r.B.fireEvent(this,"onblur",t),r.B.fireEvent(this,"onafteredit"),this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")),n.D.isIEAllVersion()||n.D.isOpera()||r.B.fireEvent(this,"onfocusout",t)}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.handleFocusinEvent=function(t){this.options.autoFocus&&(this._keyDownStart=!1),this.originalStyleObj||(this.originalStyleObj={paddingTop:parseInt(this.getStyle("padding-top"))||0,paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,
borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0}),this.addClass(this.render,this.options.onFocusClass);var e=this.render.value;"all"!=this.options.applyFormat&&(e=this.formatter.unformat(e)),e!=this.render.value&&(this.render.value=e);var i=this,s={};n.D.isIEAllVersion("11")?(s.onRestore=function(t){document.execCommand("undo",!1,null)},s.stopEvent=!0):s.onRestore=function(t){i.render.value=t.value};var o=this._getValue();WebSquare.historyManager.set(this.options.pluginName,this.id,{value:o},s),this._oldValue=o,this._focusStatus="focusin"},m.prototype.handleBeforeFocusEvent=function(t){switch(this._focusStatus){case"init":this._focusStatus="ready";break;case"ready":this._focusStatus="cancel",this.focus();break;case"done":this._focusStatus="init"}},m.prototype.handleFocusValueEventAdv=function(t){try{if(this.options.autoFocus&&(this._keyDownStart=!1),this.getReadOnly()&&!this.options.readOnlyFocusEvent)return;if(this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value="",this.removeClass("w2input_placeholder")),r.B.fireEvent(this,"onbeforeedit"),this.originalValue=this._getValue(),!n.D.isIEAllVersion()){var e=this._getValue();WebSquare.historyManager.set(this.options.pluginName,this.id,{value:e},{}),this._oldValue=e}this.originalStyleObj||(this.originalStyleObj={paddingTop:parseInt(this.getStyle("padding-top"))||0,paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0}),this.addClass(this.render,this.options.onFocusClass),this.focusStyleObj||(this.focusStyleObj={paddingTop:parseInt(this.getStyle("padding-top"))||0,paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0}),this.reFocus?this.reFocus=null:"select"==this.options.editType&&this.select(),this.setFocusSize(!0),0!=this.inputEvented||this._editFormat||(this.inputEvented=!0,this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEventBasic,{eventonreadonly:!0})),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),o.v.browserCheck.android&&o.v.browserVersion()>=5&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputEvent)),this._getMaskFormat()&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputMask)),n.D.isFF()&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.checkMaxByteLength)),this.options.validateOnInput?(this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator)),this.options.preventCopyPaste?this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,(function(t){r.B.stopEvent(t)
}))):this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteValidator))):this.options.preventCopyPaste?this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,(function(t){r.B.stopEvent(t)}))):this.options.customPasteFormatter&&"string"==typeof this.options.customPasteFormatter&&(this._customPasteFormatter=n.D.getGlobalFunction(this.options.customPasteFormatter.wq_trim(),this.scope_id),"function"==typeof this._customPasteFormatter&&this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteValidator))),"number"==this.options.dataType&&this.setStyle("imeMode","disabled"),this.options.preventCopyPaste&&(this.setStyle("MozUserSelect","none"),this.event.addListener(this.render,"ondragstart",this.event.bindAsEventListener(this,(function(t){r.B.stopEvent(t)}))),this.event.addListener(this.render,"ondragover",this.event.bindAsEventListener(this,(function(t){r.B.stopEvent(t)}))),this.event.addListener(this.render,"ondrop",this.event.bindAsEventListener(this,(function(t){r.B.stopEvent(t)}))),this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){r.B.stopEvent(t)}))),this.event.addListener(this.render,"oncut",this.event.bindAsEventListener(this,(function(t){r.B.stopEvent(t)}))),this.event.addListener(this.render,"oncontextmenu",this.event.bindAsEventListener(this,(function(t){r.B.stopEvent(t)})))));var i=this.render.value;if(this._editFormat)i=this._editValue||"",i=WebSquare.text.dynamicMask(i,this._editFormat,this._editTokens).value;else"all"!=this.options.applyFormat&&(i=this.formatter.unformat(i));i!=this.render.value&&(this.render.value=i,"select"==this.options.editType&&this.selectFlag&&(this.select(),this.selectFlag=!1)),r.B.fireEvent(this,"onfocus",t),this._focusStatus="done"}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.handleKeydownEvent=function(t){try{this.options.refSync&&this.commit();var e=t.charCode?t.charCode:t.keyCode,i=this.render.value;if(this.validator.validateKeyDown(this.render,i,t)||(this.options.exceptValidKeydown.indexOf(t.keyCode)>-1?r.B.preventDefault(t):r.B.stopEvent(t)),37==e);else if(38==e);else if(39==e);else if(40==e);else if(13==e){this.blurHandler=!0;var s=r.B.fireEvent(this,"oneditenter",t);!0===this.options.nextTabByEnter&&(this.tabOrderMoveStart=!1,!1!==s&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,r.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,r.B.preventDefault(t))))}else if(27==e)this.blurHandler=!0;else if(33==e);else if(34==e);else if(35==e);else if(36==e);else if(113==e);else if(9==e){var h;s=r.B.fireEvent(this,"oneditenter",t);if(this.tabOrderMoveStart=!1,!1!==s)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if("true"==this.options.nextTabByKeyDown)(h=n.D.getPreTabbableComp(this.id))&&(this.tabOrderMoveStart=!1,h.focus()),r.B.preventDefault(t);else this.tabOrderMoveStart=!0,r.B.preventDefault(t)}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if("true"==this.options.nextTabByKeyDown)(h=n.D.getNextTabbableComp(this.id))&&(this.tabOrderMoveStart=!1,h.focus()),r.B.preventDefault(t);else this.tabOrderMoveStart=!0,r.B.preventDefault(t)}else if(8==e){var l;if(l=o.v.browserCheck.android&&o.v.browserVersion()>=5,"all"==this.options.applyFormat&&!l){i=this.render.value;var d=WebSquare.text.getCaretPos(this.render),p=i.substring(d-1,d),m=WebSquare.text.getSelection(this.render);if(("float"===this.options.dataType||"bigDecimal"===this.options.dataType&&this.useBigDecimalFloat||"euro"===this.options.dataType||"tenge"===this.options.dataType||"rupee"===this.options.dataType)&&p===this.options.decimalDelimiter)r.B.preventDefault(t),this.render.value=i.slice(0,d-1)+i.slice(d,i.length),
WebSquare.text.setCaretPos(this.render,this.render.value.length+1);else if(isNaN(Number(p))&&m.start==m.end){var u=i.substring(d-2,d-1);(!isNaN(Number(u))&&""!=u||this._getMaskFormat()&&"text"==this.options.dataType&&""!=u&&new RegExp("["+this.options.allowChar+"]").test(u))&&new RegExp("[^"+this.options.allowChar+"]").test(p)&&(this.render.value=i.slice(0,d-2)+i.slice(d-1,i.length),WebSquare.text.setCaretPos(this.render,d-1))}}}else if(this.options.preventCopyPaste&&n.D.isOpera()){if(t.ctrlKey&&(88===t.keyCode||67===t.keyCode||86===t.keyCode))return void r.B.stopEvent(t)}else this.options.autoFocus&&(this._keyDownStart=!0);if(this.options.adjustMaxLength&&"number"==this.options.dataType&&!this.options.useMaxLength){d=WebSquare.text.getCaretPos(this.render);var c=this._getValue();this.adjustMaxLength(this.render.value),0==d&&c.length==this.options.maxlength&&(189==e||109==e?this.render.value="-"+c:(187==e&&t.shiftKey||107==e)&&(this.render.value="+"+c)),this.adjustMaxLength(this.render.value)}n.D.isOpera()&&this.checkMaxByteLength(!1),this.beforeEditValue=this._getValue()}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.handleInputEvent=function(t){try{if("all"==this.options.applyFormat&&this.realValue.length-this.render.value.length==1){var e=this.realValue,i=this.render.value,s=WebSquare.text.getCaretPos(this.render);isNaN(Number(e.substring(s,s+1)))&&(this.render.value=i.slice(0,s-1)+i.slice(s,i.length),WebSquare.text.setCaretPos(this.render,s-1)),this.handleKeyupEvent({})}}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.handleInputMask=function(t){try{if(this._getMaskFormat()&&"all"==this.options.applyFormat){var e,i=this.render.value,s=i,o=WebSquare.text.getCaretPos(this.render);if(t){var r=t.charCode?t.charCode:t.keyCode;e=r&&String.fromCharCode(r)||t.data}if(!e&&!(e=i[o-1]))return;"default"==this._getMaskFormat()&&i.length==o&&(i=i.substr(0,o));var n=!1;if("text"==this.options.dataType&&(i=this.validator.validateKeyInput(this.render,i,t).str,s.length!==i.length&&(n=!0)),"number"==this.options.dataType||"bigDecimal"==this.options.dataType?(2==i.toString().length&&"-"==i.toString()[0]&&(i=this.formatter.executeFormat(i)),i=this.validator.validateString(i)):i=this.formatter.unformat(i),i=this.formatter.format(i,!0),"number"==this.options.dataType||"bigDecimal"==this.options.dataType)if("reverse"==this._getMaskFormat())i.substr(0,i.length-1)==s&&"0"!=e&&o==s.length&&(i="-"==i[0]?"-":"");else if("default"==this._getMaskFormat())if("-"==i[0]){if(i.substr(2,i.length-2)==s.substr(1,s.length-1)&&"0"!=e&&1==o)i="-";else if(this.options.displayFormat&&"#"==this.options.displayFormat.charAt(o-1)&&o==s.length)for(var h=1;"#"==this.options.displayFormat.charAt(o-h)&&"0"==s.charAt(o-h)&&o-h>=1;)i=i.concat("0"),h+=1}else if(i.substr(1,i.length-1)==s&&"0"!=e&&0==o)i="";else if(this.options.displayFormat&&"0"!=this.options.displayFormat.charAt(o-1)&&o==s.length){h=o-1;for(var l,d="";/[0\D]/g.test(s.charAt(h))&&"0"!=this.options.displayFormat.charAt(h)&&h>=0;)h-=1;for(l=h+=1;"0"!=this.options.displayFormat.charAt(h)&&/[0\D]/g.test(s.charAt(l))&&l<s.length&&!(this.options.displayFormat.length<h);)"#"!=this.options.displayFormat.charAt(h)&&"0"!=this.options.displayFormat.charAt(h)?(d=d.concat(this.options.displayFormat.charAt(h)),this.options.displayFormat.charAt(h)==s.charAt(l)&&(l+=1)):(d=d.concat("0"),l+=1),h+=1;for(h=d.length;/\D/g.test(d[h])&&h>=0;)h-=1;d=d.substr(0,h+1),i=i.concat(d)}if(this.render.value!=i&&(this.render.value=i),this.realValue=i,"number"==this.options.dataType||"bigDecimal"==this.options.dataType)if("default"==this._getMaskFormat())if(WebSquare.text.setCaretPos(this.render,o),/\d/g.test(e))if(o==s.length)if("0"===i[o-1])1==o||"-"==i[0]&&2==o?WebSquare.text.setCaretPos(this.render,o):WebSquare.text.setCaretPos(this.render,o+1);else if("0"!==i[o]){for(;"0"!==i[o]&&o<=i.length;)o+=1;WebSquare.text.setCaretPos(this.render,o-1)
}else"0"!=i[o]||/\d/g.test(i[o-1])?WebSquare.text.setCaretPos(this.render,o):WebSquare.text.setCaretPos(this.render,o+1);else(/\D/g.test(i[o])||/\D/g.test(i[o-1]))&&WebSquare.text.setCaretPos(this.render,o+1);else e?"-"==e?WebSquare.text.setCaretPos(this.render,o):WebSquare.text.setCaretPos(this.render,o-1):WebSquare.text.setCaretPos(this.render,o);else"reverse"==this._getMaskFormat()&&(WebSquare.text.setCaretPos(this.render,o-(s.length-i.length)),/\d/g.test(t.data)&&o==s.length&&WebSquare.text.setCaretPos(this.render,i.length));else if("text"==this.options.dataType)if("default"==this._getMaskFormat())if(WebSquare.text.setCaretPos(this.render,o),new RegExp("["+this.options.allowChar+"]").test(e))if(o==s.length){for(;o<=i.length;)o+=1;WebSquare.text.setCaretPos(this.render,o)}else new RegExp("[^"+this.options.allowChar+"]").test(i[o])||new RegExp("[^"+this.options.allowChar+"]").test(i[o-1])?WebSquare.text.setCaretPos(this.render,o+1):n&&i.length==this.options.displayFormat.length&&WebSquare.text.setCaretPos(this.render,o-1);else e?WebSquare.text.setCaretPos(this.render,o-1):WebSquare.text.setCaretPos(this.render,o);else"reverse"==this._getMaskFormat()&&(WebSquare.text.setCaretPos(this.render,o-(s.length-i.length)),new RegExp("["+this.options.allowChar+"]").test(t.data)&&o==s.length&&WebSquare.text.setCaretPos(this.render,i.length))}}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.handleInputValidator=function(t){try{var e=this.render.value,i=this.validator.validateKeyInput(this.render,e,t);if(i.valid){if(e!==i.str){var s=WebSquare.text.getCaretPos(this.render);n.D.isIEAllVersion()||(s-=e.length-i.str.length);var o=this.render.id,h=i.str;!0===t.isComposing&&"function"==typeof requestAnimationFrame?requestAnimationFrame((function(){document.getElementById(o).value=h})):this.render.value=h,WebSquare.text.setCaretPos(this.render,s)}}else r.B.stopEvent(t);if(!this._getMaskFormat()){var l="";-1!=this.options.maxByteLength?l=n.D.getStringByByteSize(this.render.value,this.options.maxByteLength,this.options.byteCheckIgnoreChar):-1!=this.options.maxLength&&this.options.maxLength.indexOf(this.options.decimalDelimiter)<0&&(l=this.render.value,"function"==typeof customModelFormatter&&(l=customModelFormatter.call(this,l)),l=(l=this.formatter.unformat(l)).split(this.options.delimiter).join(""));var d=l.charAt(l.length-1);if(l.length>0&&!0!==n.D.isKorean(d)&&(n.D.getByteLength(l)==this.options.maxByteLength||l.length==this.options.maxLength)){var p=this;setTimeout((function(){r.B.fireEvent(p,"oneditfull")}),200)}}}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.handleKeypressEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.render.value;if(n.D.isFF()&&t.ctrlKey&&e)return;if("all"==this.options.applyFormat&&!this._getMaskFormat()&&(i=this.formatter.unformat(i),"number"===this.options.dataType)){var s=this.options.delimiter||",";-1!=i.indexOf(s)&&(i=i.split(s).join(""))}if(!this.validator.validateKeyPress(this.render,i,t)){if(this._isNumberType()&&this.options.validateOnInput&&this.floatMaxlength>0&&this.options.autoDecimalPoint){var o=!1;if(this.render.value.indexOf(this.options.decimalDelimiter)>-1&&(o=!0),!o)return}if(1==this.options.autoPopupInvalidMessage&&e>46&&!(e>=112&&e<=123)&&alert(this.options.invalidMessage),!0===n.D.getBoolean(this.options.fireEventOnInvalid)&&this.validator.obfuscator_invalidObject){var h={};h.callerId=this.validator.obfuscator_invalidObject.callerId,h.type=this.validator.obfuscator_invalidObject.getType(),h.value=this.validator.obfuscator_invalidObject.getValue(),h.detail=this.validator.obfuscator_invalidObject.getDetail(),r.B.fireEvent(this,"oninputinvalid",h)}r.B.stopEvent(t)}}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.handleKeyupEvent=function(t){try{this.options.refSyncKeyup&&this.commit();var e=t.charCode?t.charCode:t.keyCode,i=!1,s=this.render.value
;if(this._isNumberType()&&this.options.autoFocus&&!1===this.options.autoDecimalPoint&&(e>=48&&e<=57||e>=96&&e<=105||s.charAt(s.length-1)==this.options.decimalDelimiter)&&this.floatMaxlength>0){s=this.formatter.unformat(s);var o=this.options.delimiter||",";if(-1!=s.indexOf(o)&&(s=s.split(o).join("")),-1==s.indexOf(this.options.decimalDelimiter))this.beforeEditValue.length==this._integerMaxLength&&(i=!0,this.tabOrderMoveStart=!0);else if(this._fractionMaxLength>0){var h=s.split(this.options.decimalDelimiter),l=(h[0],h[1]);l&&l.length>0&&l.length>=this._fractionMaxLength&&(i=!0,this.tabOrderMoveStart=!0)}}if(37==e);else if(38==e);else if(39==e);else if(40==e);else if(13==e){if(1==this.blurHandler&&1==this.options.useKeyupBlur)if(!0===this.options.enterBlur)this.blur(),this.blurHandler=!1;else{var d=this._getValue(),p=this.modelControl.getData();this.noRefresh=!0,this.options.useMonthYearFormat&&"date"===this.options.dataType&&(d=WebSquare.date.getIOUnFormatDate(d,this.options.ioFormat));var m=n.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id);"function"==typeof m&&(d=m.call(this,d,this.getDisplayValue())),this._getMaskFormat()?this.modelControl.setData(this.maskFormatModelFormat(d)):this.modelControl.setData(d),this.noRefresh=!1,p!=d&&r.B.fireEvent(this,"onchange",{oldValue:p,newValue:d})}if(!0===this.options.nextTabByEnter)if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(u=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,u.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(u=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,u.focus())}else if(27==e)1==this.blurHandler&&1==this.options.useKeyupBlur&&(this.blur(),this.blurHandler=!1);else if(33==e);else if(34==e);else if(35==e);else if(36==e);else if(113==e);else if(16==e);else if(9==e||i){var u;if(null!=WebSquare.tabOrder[this.id]&&"true"!=this.options.nextTabByKeyDown)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(u=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,u.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(u=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,u.focus())}else{if("all"==this.options.applyFormat&&!this._getMaskFormat()){d="";if(90==e&&t.ctrlKey){var c=WebSquare.historyManager.get(this.options.pluginName,this.id);void 0===c.value&&(c.value=""),d=c.value}else d=this.render.value;var y,g,f=WebSquare.text.getCaretPos(this.render),v=WebSquare.text.getSelection(this.render);if(y=d.length,d=this.formatter.unformat(d),this.options.autoDecimalPoint&&-1==d.indexOf(this.options.decimalDelimiter)){var b=d.split(this.options.delimiter).join("");b.length>this._integerMaxLength&&(d=b.slice(0,this._integerMaxLength)+this.options.decimalDelimiter+b.slice(this._integerMaxLength,b.length))}d=this.validator.validateString(d),d=this.formatter.format(d,!0),d=this.validator.validateString(d),g=(d=this.formatter.format(d,!0)).length,this.render.value!=d&&(this.render.value=d),this.realValue=d,v.start===v.end&&WebSquare.text.setCaretPos(this.render,Math.max(f+g-y,0))}this.checkMaxByteLength()}this.options.autoFocus&&(this._keyDownStart=!1);var F={oldValue:this.beforeEditValue,newValue:this._getValue(),keyCode:e};"spinner"===this.options.pluginName&&this.parentControl?r.B.fireEvent(this.parentControl,"oneditkeyup",F,t):r.B.fireEvent(this,"oneditkeyup",F,t)}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.handleBlurEvent=function(t){try{this.setFocusSize(!1),this.removeClass(this.render,this.options.onFocusClass),this._setValue(this._getValue());var e={value:this._oldValue};void 0===e.value&&(e.value=this.originalValue),e.value!=this._getValue()&&r.B.fireEvent(this,"onchange",{oldValue:e.value,newValue:this._getValue()}),r.B.fireEvent(this,"onblur",t),this._focusStatus="init"}catch(t){a.w.printStackTrace(t,null,this)}},
m.prototype.handleCopyEvent=function(t){try{if(this.options.readOnly&&"noFormat"==this.options.copyOnReadOnly){var e,i=this._getValue();if(n.D.isIEAllVersion()){e=window.clipboardData;var s=this;o.v.setTimer((function(){e.setData("Text",i),o.v.clearTimer(s.id+"_handleCopyEvent")}),{key:s.id+"_handleCopyEvent",caller:s,delay:1})}else(e=t.clipboardData).setData("Text",i);r.B.stopEvent(t)}}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.handleColorChangeEvent=function(t){try{this.modelControl.isBinded()&&this.modelControl.setData(this.render.value)}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.handleDynamicMask=function(t){try{for(var e=this.render.selectionStart,i=0,s=0,o=this.render.value,r=e-1;r>=0;r--)0==/^[0-9a-zA-Z]/.test(o.charAt(r))&&i++;this.render.value[e-1];var n=WebSquare.text.dynamicMask(this.render.value,this._editFormat,this._editTokens);this.render.value=n.value,this._editValue=n.orgValue;for(r=e;r>=0;r--)0==/^[0-9a-zA-Z]/.test(n.value.charAt(r))&&s++;var h=e+(s-i);this.render===document.activeElement&&this.render.setSelectionRange(h,h)}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.handleKeyDownDynamicMask=function(t){try{WebSquare.text.deleteMaskChar(t,this,this.render);var e=t.charCode?t.charCode:t.keyCode,i=this.render.value;if(this.validator.validateKeyDown(this.render,i,t)||r.B.stopEvent(t),13==e){this.blurHandler=!0;var s=r.B.fireEvent(this,"oneditenter",t);!0===this.options.nextTabByEnter&&(this.tabOrderMoveStart=!1,!1!==s&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,r.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,r.B.preventDefault(t))))}else if(9==e){s=r.B.fireEvent(this,"oneditenter",t);this.tabOrderMoveStart=!1,!1!==s&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,r.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,r.B.preventDefault(t)))}}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.handleKeyUpDynamicMask=function(t){try{var e=t.charCode?t.charCode:t.keyCode;this.render.value;if(13==e){if(1==this.blurHandler&&1==this.options.useKeyupBlur)if(!0===this.options.enterBlur)this.blur(),this.blurHandler=!1;else{var i=this._getValue(),s=this.modelControl.getData();this.noRefresh=!0;var o=n.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id);"function"==typeof o&&(i=o.call(this,i,this.getDisplayValue())),this.modelControl.setData(i),this.noRefresh=!1,s!=i&&r.B.fireEvent(this,"onchange",{oldValue:s,newValue:i})}if(!0===this.options.nextTabByEnter)if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(h=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,h.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(h=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,h.focus())}else if(27==e)1==this.blurHandler&&1==this.options.useKeyupBlur&&(this.blur(),this.blurHandler=!1);else if(9==e){var h;if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(h=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,h.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(h=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,h.focus())}this.options.autoFocus&&(this._keyDownStart=!1);var l={oldValue:this.modelControl.getData(),newValue:this._getValue(),keyCode:e};"spinner"===this.options.pluginName&&this.parentControl?r.B.fireEvent(this.parentControl,"oneditkeyup",l,t):r.B.fireEvent(this,"oneditkeyup",l,t)}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.handleBlurDynamicMask=function(t){try{this.handleBlurEventBasic(t)}catch(t){
a.w.printStackTrace(t,null,this)}},m.prototype.handleFocusValueEventAdvMask=function(t){try{this.handleFocusValueEventAdv(t)}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype.focus=function(t){try{this.render.focus(),"select"==this.options.editType&&this.render.select()}catch(t){a.w.printStackTrace(t)}},m.prototype.select=function(t){try{this.selectFlag=!0,this.render.select()}catch(t){a.w.printStackTrace(t)}},m.prototype.setDisabled=function(t){try{if(t=n.D.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.disabled=t,this.setProperty("disabled",t)}else this.options.disabled=t,this.setProperty("disabled",t),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder)}catch(t){a.w.printStackTrace(t)}return t},m.prototype.setReadOnly=function(t){try{if(t=n.D.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.readOnly=t,this.setProperty("readOnly",t)}else this.options.readOnly=t,this.setProperty("readOnly",t),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder)}catch(t){a.w.printStackTrace(t,null,this)}return t},m.prototype.serialize=function(){return{value:this._getValue()}},m.prototype.restore=function(t){try{this._setValue(t.value)}catch(t){return a.w.printStackTrace(t,null,this),!1}return!0},m.prototype._trim=function(t){try{var e=t+"";return this.options.trim?t=e.wq_trim():(this.options.ltrim&&(t=e.replace(/^\s+/,"")),this.options.rtrim&&(t=e.replace(/\s+$/,""))),t}catch(e){return a.w.printStackTrace(e,null,this),t}},m.prototype.setImeMode=function(t){try{this.setStyle("imeMode",t)}catch(e){return a.w.printStackTrace(e,null,this),t}},m.prototype.getFocusedComponentId=function(){try{var t=this.parentControl&&this.parentControl.options&&this.parentControl.options.pluginName;if("grid"===t||"gridView"===t)return this.parentControl.id}catch(t){a.w.printStackTrace(t,null,this)}return this.id},m.prototype._isNumberType=function(){try{var t=this.options.dataType;return!(!t||"float"!=t&&"number"!=t&&"bigDecimal"!=t&&"euro"!=t&&"tenge"!=t&&"rupee"!=t)}catch(t){a.w.printStackTrace(t,null,this)}},m.prototype._getMaskFormat=function(){try{return this.options.maskFormat&&this.options.displayFormat?this.options.maskFormat:""}catch(t){a.w.printStackTrace(t,null,this)}}}}]);